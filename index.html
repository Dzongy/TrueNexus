<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZENITH â Sovereign Nexus</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700;800;900&display=swap');
:root {
  --void: #000000;
  --turq: #00ffea;
  --turq-dim: #00b8a9;
  --turq-glow: rgba(0,255,234,0.15);
  --turq-bright: #33fff0;
  --violet: #8b5cf6;
  --gold: #fbbf24;
  --gold-dim: #d4a017;
  --red: #ff3b3b;
  --text: #e0f2f1;
  --text-dim: #5a7a78;
  --text-muted: #2a3a39;
  --panel: rgba(0,255,234,0.03);
  --panel-border: rgba(0,255,234,0.12);
  --glass: rgba(0,20,18,0.85);
}
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100vw;height:100vh;overflow:hidden;background:var(--void);color:var(--text);font-family:'JetBrains Mono',monospace}

/* SCANLINES */
body::before{content:'';position:fixed;inset:0;z-index:9998;pointer-events:none;
background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,234,0.015) 2px,rgba(0,255,234,0.015) 4px);
animation:scanFlicker 5s ease-in-out infinite}
@keyframes scanFlicker{0%,90%,100%{opacity:0.4}92%{opacity:0.8}94%{opacity:0.2}96%{opacity:0.9}}

/* GRID OVERLAY */
body::after{content:'';position:fixed;inset:0;z-index:9997;pointer-events:none;
background-image:linear-gradient(rgba(0,255,234,0.02) 1px,transparent 1px),linear-gradient(90deg,rgba(0,255,234,0.02) 1px,transparent 1px);
background-size:60px 60px}

/* LOGIN GATE */
.login-gate{position:fixed;inset:0;z-index:10000;background:var(--void);display:flex;align-items:center;justify-content:center;transition:all 1.2s cubic-bezier(0.16,1,0.3,1)}
.login-gate.split{clip-path:polygon(0 0,0 0,0 100%,0 100%)}
.login-gate .rain{position:absolute;inset:0;overflow:hidden;pointer-events:none}
.login-gate .rain-col{position:absolute;top:-100%;font-size:10px;color:var(--turq);opacity:0.15;font-family:'JetBrains Mono',monospace;writing-mode:vertical-rl;animation:rainFall linear infinite;line-height:1.2}
@keyframes rainFall{0%{transform:translateY(-100%)}100%{transform:translateY(200vh)}}
.login-box{text-align:center;z-index:1;max-width:400px;width:90%}
.login-logo{font-size:4rem;font-weight:800;letter-spacing:0.3em;background:linear-gradient(135deg,var(--turq),var(--violet),var(--gold));background-size:200% 200%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:logoShift 4s ease infinite}
@keyframes logoShift{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}
.login-sub{font-size:0.6rem;letter-spacing:0.4em;text-transform:uppercase;color:var(--turq-dim);margin:0.5rem 0 2rem;opacity:0.7}
.login-input{width:100%;background:transparent;border:1px solid var(--panel-border);border-radius:0;color:var(--turq);font-family:'JetBrains Mono',monospace;font-size:0.9rem;letter-spacing:0.2em;text-transform:uppercase;padding:1rem;text-align:center;outline:none;transition:all 0.3s}
.login-input:focus{border-color:var(--turq);box-shadow:0 0 30px var(--turq-glow),inset 0 0 30px rgba(0,255,234,0.05)}
.login-input::placeholder{color:var(--text-muted);text-transform:none;letter-spacing:0.1em}
.login-input.error{border-color:var(--red);animation:shake 0.3s ease}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px)}75%{transform:translateX(8px)}}
.login-btn{width:100%;margin-top:1rem;background:transparent;border:1px solid var(--turq-dim);color:var(--turq);font-family:'JetBrains Mono',monospace;font-size:0.7rem;letter-spacing:0.25em;text-transform:uppercase;padding:0.8rem;cursor:pointer;transition:all 0.3s}
.login-btn:hover{background:var(--turq);color:var(--void);box-shadow:0 0 40px var(--turq-glow)}

/* MAIN LAYOUT â twin panels */
.main{display:none;width:100vw;height:100vh;position:relative}
.main.active{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto 1fr}

/* TOP BAR */
.topbar{grid-column:1/3;display:flex;align-items:center;justify-content:space-between;padding:0.5rem 1rem;border-bottom:1px solid var(--panel-border);background:var(--glass);backdrop-filter:blur(20px);z-index:100}
.topbar-left{display:flex;align-items:center;gap:0.75rem}
.tb-logo{font-size:1rem;font-weight:800;letter-spacing:0.2em;color:var(--turq);text-shadow:0 0 20px var(--turq-glow)}
.tb-tag{font-size:0.5rem;letter-spacing:0.1em;color:var(--void);background:var(--turq);padding:0.15rem 0.5rem;font-weight:700}
.tb-dot{width:6px;height:6px;background:var(--turq);border-radius:50%;box-shadow:0 0 10px var(--turq);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.3}}
.topbar-right{display:flex;align-items:center;gap:0.75rem}
.wallet-live{display:flex;align-items:center;gap:0.5rem;padding:0.3rem 0.6rem;border:1px solid rgba(139,92,246,0.3);background:rgba(139,92,246,0.08);cursor:pointer;transition:all 0.2s}
.wallet-live:hover{border-color:var(--violet);box-shadow:0 0 15px rgba(139,92,246,0.2)}
.wallet-live .wl-icon{width:14px;height:14px;background:linear-gradient(135deg,#ab9ff2,#6e56cf);border-radius:50%}
.wallet-live .wl-addr{font-size:0.55rem;color:var(--violet);letter-spacing:0.05em}
.wallet-live .wl-bal{font-size:0.65rem;color:var(--text);font-weight:600}
.tb-btn{font-size:0.55rem;letter-spacing:0.1em;color:var(--turq-dim);border:1px solid var(--panel-border);padding:0.3rem 0.6rem;cursor:pointer;transition:all 0.2s;background:transparent}
.tb-btn:hover{border-color:var(--turq);color:var(--turq)}

/* LEFT PANEL â CHAT */
.panel-left{display:flex;flex-direction:column;border-right:1px solid var(--panel-border);overflow:hidden;position:relative}
.panel-left::before{content:'';position:absolute;top:0;right:0;width:1px;height:100%;background:linear-gradient(180deg,transparent,var(--turq),transparent);opacity:0.3}
.panel-header{padding:0.5rem 1rem;border-bottom:1px solid var(--panel-border);display:flex;align-items:center;justify-content:space-between}
.ph-title{font-size:0.55rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--turq-dim)}
.ph-status{font-size:0.5rem;color:var(--text-muted)}
#chat{flex:1;overflow-y:auto;padding:0.75rem 1rem;scroll-behavior:smooth}
#chat::-webkit-scrollbar{width:2px}
#chat::-webkit-scrollbar-thumb{background:var(--turq-dim)}
.msg{margin-bottom:0.5rem;padding:0.5rem 0.7rem;font-size:0.75rem;line-height:1.6;max-width:90%;animation:msgIn 0.3s ease}
@keyframes msgIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.msg.you{margin-left:auto;color:var(--text);border-left:2px solid var(--turq-dim);padding-left:0.6rem}
.msg.nexus{color:var(--turq-bright);border-left:2px solid var(--turq);padding-left:0.6rem;text-shadow:0 0 10px rgba(0,255,234,0.1)}
.msg.voice{margin-left:auto;color:var(--gold);border-left:2px solid var(--gold-dim);padding-left:0.6rem}
.msg.system{color:var(--text-muted);font-size:0.6rem;text-align:center;max-width:100%;border:none;padding:0.3rem}
.msg-label{font-size:0.5rem;letter-spacing:0.15em;text-transform:uppercase;opacity:0.5;margin-bottom:0.15rem}
.chat-input{display:flex;align-items:center;gap:0.4rem;padding:0.5rem 0.75rem;border-top:1px solid var(--panel-border);background:var(--glass)}
.chat-input input{flex:1;background:transparent;border:1px solid var(--panel-border);color:var(--text);font-family:'JetBrains Mono',monospace;font-size:0.75rem;padding:0.6rem 0.75rem;outline:none;transition:border-color 0.2s}
.chat-input input:focus{border-color:var(--turq);box-shadow:0 0 15px var(--turq-glow)}
.chat-input input::placeholder{color:var(--text-muted)}
.cb{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:1px solid var(--panel-border);color:var(--turq-dim);font-size:0.6rem;font-weight:700;cursor:pointer;transition:all 0.2s;background:transparent}
.cb:hover{border-color:var(--turq);color:var(--turq)}
.cb.send{background:var(--turq);color:var(--void);border-color:var(--turq)}
.cb.send:hover{box-shadow:0 0 20px var(--turq-glow)}
.cb.rec{border-color:var(--red);color:var(--red);animation:pulse 1s infinite}
.cb.tts-on{border-color:var(--turq);color:var(--turq);background:rgba(0,255,234,0.1)}

/* RIGHT PANEL â MEMORY + WALLET + ORB */
.panel-right{display:flex;flex-direction:column;overflow:hidden;position:relative}

/* SINGULARITY ORB */
.orb-wrap{display:flex;align-items:center;justify-content:center;padding:1.5rem 0;flex-shrink:0}
.orb{width:100px;height:100px;border-radius:50%;background:radial-gradient(circle,var(--turq) 0%,rgba(0,255,234,0.3) 30%,transparent 70%);box-shadow:0 0 60px var(--turq-glow),0 0 120px rgba(0,255,234,0.08);animation:orbPulse 4s ease-in-out infinite;position:relative}
.orb::after{content:'';position:absolute;inset:-10px;border-radius:50%;border:1px solid rgba(0,255,234,0.15);animation:orbRing 8s linear infinite}
@keyframes orbPulse{0%,100%{transform:scale(1);box-shadow:0 0 60px var(--turq-glow)}50%{transform:scale(1.05);box-shadow:0 0 80px var(--turq-glow),0 0 30px rgba(139,92,246,0.2),0 0 15px rgba(251,191,36,0.1)}}
@keyframes orbRing{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.orb.flare{box-shadow:0 0 80px var(--turq-glow),0 0 40px rgba(139,92,246,0.4),0 0 20px rgba(251,191,36,0.3)!important}

/* STATS GRID */
.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:0.4rem;padding:0 0.75rem 0.5rem;flex-shrink:0}
.sg-item{border:1px solid var(--panel-border);padding:0.4rem 0.5rem;text-align:center;transition:all 0.2s}
.sg-item:hover{border-color:rgba(0,255,234,0.3);background:rgba(0,255,234,0.03)}
.sg-val{font-size:0.9rem;font-weight:700;color:var(--turq)}
.sg-val.gold{color:var(--gold)}
.sg-val.violet{color:var(--violet)}
.sg-label{font-size:0.45rem;letter-spacing:0.12em;text-transform:uppercase;color:var(--text-muted);margin-top:0.1rem}

/* MINT LOG */
.mint-section{flex:1;overflow:hidden;display:flex;flex-direction:column;border-top:1px solid var(--panel-border)}
.mint-header{padding:0.4rem 0.75rem;display:flex;align-items:center;justify-content:space-between}
.mh-title{font-size:0.5rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--gold-dim)}
.mh-count{font-size:0.55rem;color:var(--gold);font-weight:600}
.mint-log{flex:1;overflow-y:auto;padding:0 0.75rem 0.5rem}
.mint-log::-webkit-scrollbar{width:2px}
.mint-log::-webkit-scrollbar-thumb{background:var(--gold-dim)}
.mint-entry{padding:0.35rem 0;border-bottom:1px solid rgba(251,191,36,0.06);font-size:0.6rem;display:flex;justify-content:space-between;align-items:center;transition:all 0.2s;cursor:pointer}
.mint-entry:hover{background:rgba(251,191,36,0.04);padding-left:0.3rem}
.me-sig{color:var(--turq-dim);font-size:0.55rem}
.me-status{color:var(--gold);font-size:0.5rem;letter-spacing:0.05em}

/* SOUL PASSAGE */
.soul{padding:0.5rem 0.75rem;border-top:1px solid var(--panel-border);flex-shrink:0}
.soul-label{font-size:0.45rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--turq-dim);margin-bottom:0.2rem}
.soul-text{font-size:0.7rem;font-style:italic;color:var(--text-dim);line-height:1.5}

/* MOBILE */
@media(max-width:768px){
  .main.active{grid-template-columns:1fr;grid-template-rows:auto 1fr}
  .panel-right{display:none}
  .panel-right.mob-show{display:flex;position:fixed;inset:0;z-index:200;background:var(--void)}
  .mob-toggle{display:block!important}
  .orb-wrap{padding:1rem 0}
  .orb{width:70px;height:70px}
}
.mob-toggle{display:none;font-size:0.55rem;letter-spacing:0.1em;color:var(--turq-dim);border:1px solid var(--panel-border);padding:0.3rem 0.6rem;cursor:pointer;background:transparent}
</style>
</head>
<body>

<!-- LOGIN -->
<div class="login-gate" id="loginGate">
<div class="rain" id="rain"></div>
<div class="login-box">
<div class="login-logo">ZENITH</div>
<div class="login-sub">Sovereign Nexus Intelligence</div>
<input type="password" class="login-input" id="loginInput" placeholder="Identity phrase..." autocomplete="off" onkeydown="if(event.key==='Enter')auth()">
<button class="login-btn" onclick="auth()">AUTHENTICATE</button>
</div>
</div>

<!-- MAIN -->
<div class="main" id="main">
<div class="topbar">
<div class="topbar-left">
<span class="tb-logo">ZENITH</span>
<span class="tb-tag">AMOS v10.5</span>
<span class="tb-dot"></span>
<span class="mob-toggle" onclick="toggleRight()">NEXUS</span>
</div>
<div class="topbar-right">
<div class="wallet-live" id="walletBtn" onclick="connectPhantom()">
<div class="wl-icon"></div>
<span class="wl-addr" id="wAddr">CONNECT</span>
<span class="wl-bal" id="wBal"></span>
</div>
<div class="tb-btn" onclick="toggleRight()">MEMORY</div>
</div>
</div>

<!-- LEFT: CHAT -->
<div class="panel-left">
<div class="panel-header">
<span class="ph-title">Nexus Terminal</span>
<span class="ph-status" id="connStatus">offline</span>
</div>
<div id="chat">
<div class="msg system">ZENITH v10.5 // AGI 70% // 742 runs loaded</div>
<div class="msg nexus"><div class="msg-label">NEXUS</div>All systems nominal. Awaiting input.</div>
</div>
<div class="soul" id="soulSection">
<div class="soul-label">/soul</div>
<div class="soul-text" id="soulText">She did not recall her memories.</div>
</div>
<div class="chat-input">
<div class="cb" id="micBtn" onclick="toggleMic()">MIC</div>
<input type="text" id="input" placeholder="..." autocomplete="off" onkeydown="if(event.key==='Enter')sendMsg()">
<div class="cb send" onclick="sendMsg()">&#10148;</div>
<div class="cb" id="ttsBtn" onclick="toggleTTS()">TTS</div>
</div>
</div>

<!-- RIGHT: MEMORY/WALLET/ORB -->
<div class="panel-right" id="panelRight">
<div class="orb-wrap"><div class="orb" id="orb"></div></div>
<div class="stats-grid">
<div class="sg-item"><div class="sg-val">742</div><div class="sg-label">Runs</div></div>
<div class="sg-item"><div class="sg-val violet">7</div><div class="sg-label">Brains</div></div>
<div class="sg-item"><div class="sg-val gold">87</div><div class="sg-label">Mints</div></div>
<div class="sg-item"><div class="sg-val">70%</div><div class="sg-label">AGI</div></div>
<div class="sg-item"><div class="sg-val">100%</div><div class="sg-label">Vault</div></div>
<div class="sg-item"><div class="sg-val">14K</div><div class="sg-label">Messages</div></div>
<div class="sg-item"><div class="sg-val" style="color:var(--turq)">ON</div><div class="sg-label">Zenith Lock</div></div>
<div class="sg-item"><div class="sg-val" style="color:var(--text-muted)">OFF</div><div class="sg-label">Sandbox</div></div>
<div class="sg-item"><div class="sg-val" style="color:var(--turq)">FULL</div><div class="sg-label">Autonomy</div></div>
</div>
<div class="mint-section">
<div class="mint-header"><span class="mh-title">Mint Log</span><span class="mh-count" id="mintCount">87/87</span></div>
<div class="mint-log" id="mintLog"></div>
</div>
</div>
</div>

<script>
// === LOGIN ===
function genRain(){const r=document.getElementById('rain');if(!r)return;for(let i=0;i<40;i++){const c=document.createElement('div');c.className='rain-col';c.style.left=Math.random()*100+'%';c.style.animationDuration=(4+Math.random()*8)+'s';c.style.animationDelay=Math.random()*5+'s';let t='';for(let j=0;j<30;j++)t+=String.fromCharCode(0x30A0+Math.random()*96);c.textContent=t;r.appendChild(c)}}
genRain();

async function sha256(s){const b=await crypto.subtle.digest('SHA-256',new TextEncoder().encode(s));return Array.from(new Uint8Array(b)).map(x=>x.toString(16).padStart(2,'0')).join('')}
let correctHash=null;
(async()=>{correctHash=await sha256('ARCHITECTDZONGYZENITH')})();

if(sessionStorage.getItem('z_auth')==='1'){document.getElementById('loginGate').style.display='none';document.getElementById('main').classList.add('active')}
document.getElementById('loginInput').focus();

async function auth(){
  const v=document.getElementById('loginInput').value.trim().toUpperCase().replace(/\s+/g,'');
  const h=await sha256(v);
  if(h===correctHash){
    sessionStorage.setItem('z_auth','1');
    document.getElementById('loginGate').classList.add('split');
    setTimeout(()=>{document.getElementById('loginGate').style.display='none';document.getElementById('main').classList.add('active');document.getElementById('input').focus()},1200);
  } else {
    const i=document.getElementById('loginInput');i.classList.add('error');i.value='';i.placeholder='NOT RECOGNIZED';
    setTimeout(()=>{i.classList.remove('error');i.placeholder='Identity phrase...'},1500);
  }
}

// === CHAT ===
const chat=document.getElementById('chat');
function addMsg(t,cls,label){
  const d=document.createElement('div');d.className='msg '+cls;
  if(label)d.innerHTML='<div class="msg-label">'+label+'</div>'+t;else d.textContent=t;
  chat.appendChild(d);chat.scrollTop=chat.scrollHeight;
  if(cls==='nexus'||cls==='voice'){const o=document.getElementById('orb');o.classList.add('flare');setTimeout(()=>o.classList.remove('flare'),2000)}
}

// === WEBSOCKET ===
let ws,wsRetries=0,wsOffline=false;
function connectWS(){
  if(location.protocol==='https:'){if(!wsOffline){addMsg('Dashboard mode â live chat via Termux.','system');wsOffline=true;document.getElementById('connStatus').textContent='dashboard'}return}
  if(wsRetries>=3){if(!wsOffline){addMsg('Server offline. node server.js to connect.','system');wsOffline=true;document.getElementById('connStatus').textContent='offline'}return}
  const p=location.protocol==='https:'?'wss:':'ws:';ws=new WebSocket(p+'//'+location.host+'/chat');
  ws.onopen=()=>{wsRetries=0;wsOffline=false;addMsg('Connected.','system');document.getElementById('connStatus').textContent='live';document.getElementById('connStatus').style.color='var(--turq)'};
  ws.onclose=()=>{wsRetries++;if(wsRetries<3)setTimeout(connectWS,3000);else if(!wsOffline){addMsg('Server offline.','system');wsOffline=true;document.getElementById('connStatus').textContent='offline'}};
  ws.onerror=()=>{};
  ws.onmessage=(e)=>{try{const d=JSON.parse(e.data);const t=d.content||e.data;addMsg(t,'nexus','NEXUS');if(ttsOn&&d.speak&&window.speechSynthesis){const u=new SpeechSynthesisUtterance(t.replace(/^Nexus:\s*/i,''));speechSynthesis.speak(u)}}catch(x){addMsg(e.data,'nexus','NEXUS')}};
}

function sendMsg(){
  const t=document.getElementById('input').value.trim();if(!t)return;
  addMsg(t,'you','YOU');
  if(ws&&ws.readyState===1)ws.send(JSON.stringify({type:'text',content:t}));
  if(t.startsWith('/soul')){const p=t.replace('/soul','').trim();if(p)document.getElementById('soulText').textContent=p}
  document.getElementById('input').value='';document.getElementById('input').focus();
}

// === VOICE ===
let recognition,isRec=false;
function toggleMic(){
  if(!('webkitSpeechRecognition' in window||'SpeechRecognition' in window)){addMsg('Speech not supported.','system');return}
  if(isRec){recognition.stop();return}
  const SR=window.SpeechRecognition||window.webkitSpeechRecognition;recognition=new SR();recognition.continuous=false;recognition.interimResults=false;recognition.lang='en-US';
  const b=document.getElementById('micBtn');
  recognition.onstart=()=>{isRec=true;b.classList.add('rec');b.textContent='REC'};
  recognition.onresult=(e)=>{const t=e.results[0][0].transcript;const c=e.results[0][0].confidence;addMsg(t,'voice','VOICE');if(ws&&ws.readyState===1)ws.send(JSON.stringify({type:'voice',content:t,confidence:c}))};
  recognition.onend=()=>{isRec=false;b.classList.remove('rec');b.textContent='MIC'};
  recognition.onerror=(e)=>{isRec=false;b.classList.remove('rec');b.textContent='MIC'};
  recognition.start();
}

// === TTS ===
let ttsOn=true;
document.getElementById('ttsBtn').classList.add('tts-on');
function toggleTTS(){ttsOn=!ttsOn;document.getElementById('ttsBtn').classList.toggle('tts-on',ttsOn);if(!ttsOn&&window.speechSynthesis)speechSynthesis.cancel()}

// === PHANTOM WALLET ===
async function connectPhantom(){
  try{
    if('solana' in window&&window.solana.isPhantom){
      const r=await window.solana.connect();const pk=r.publicKey.toString();
      document.getElementById('wAddr').textContent=pk.slice(0,4)+'..'+pk.slice(-4);
      addMsg('Phantom: '+pk.slice(0,4)+'..'+pk.slice(-4),'system');
    }else{addMsg('Phantom not found.','system')}
  }catch(e){addMsg('Wallet cancelled.','system')}
}

// === MINT LOG (demo entries) ===
(function populateMints(){
  const log=document.getElementById('mintLog');
  const sigs=['7xKz..f3Qa','9mRt..h2Bb','3vNp..k8Cc','5wLq..j4Dd','2sPr..m6Ee','8uTs..n1Ff','4yVu..p7Gg','6aWx..r9Hh','1bXy..s5Ii'];
  for(let i=0;i<87;i++){
    const d=document.createElement('div');d.className='mint-entry';
    const sig=sigs[i%sigs.length].replace(/\d/g,()=>Math.floor(Math.random()*10));
    d.innerHTML='<span class="me-sig">'+sig+'</span><span class="me-status">MINTED</span>';
    d.title='View on Solscan';
    log.appendChild(d);
  }
})();

// === MOBILE TOGGLE ===
function toggleRight(){document.getElementById('panelRight').classList.toggle('mob-show')}

// === INIT ===
connectWS();
if(!sessionStorage.getItem('z_auth'))document.getElementById('loginInput').focus();
else document.getElementById('input').focus();
</script>
</body>
</html>